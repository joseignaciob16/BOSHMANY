<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>PESV - BOSHMANY INGENIER√çA DE LA SABANA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fuente opcional de Google (requiere internet) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-main: #f4f6fb;
      --bg-card: #ffffff;
      --primary: #1b4f72;
      --primary-soft: #d6eaf8;
      --accent: #f39c12;
      --danger: #c0392b;
      --success: #2e7d32;
      --text-main: #1f2933;
      --text-muted: #6b7280;
      --border-soft: #e5e7eb;
      --radius: 10px;
      --shadow-soft: 0 4px 12px rgba(15, 23, 42, 0.07);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      line-height: 1.5;
    }

    header {
      background: linear-gradient(135deg, #0f172a, #1d4ed8);
      color: white;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    header .branding {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    header .logo {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 18px;
    }

    header h1 {
      font-size: 18px;
      font-weight: 600;
    }

    header p {
      font-size: 12px;
      opacity: 0.85;
    }

    header .user-info {
      text-align: right;
      font-size: 12px;
    }

    .container {
      display: grid;
      grid-template-columns: 260px 1fr;
      min-height: calc(100vh - 72px);
    }

    nav {
      background: #0b1120;
      color: #cbd5f5;
      padding: 16px;
      border-right: 1px solid #111827;
    }

    .nav-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin: 16px 0 8px;
      color: #6b7280;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      margin-bottom: 4px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      transition: background 0.15s ease, color 0.15s ease;
    }

    .nav-item span.icon {
      font-size: 15px;
    }

    .nav-item.active {
      background: #1d4ed8;
      color: white;
    }

    .nav-item:hover:not(.active) {
      background: #111827;
    }

    main {
      padding: 18px 22px;
      overflow-y: auto;
    }

    .view {
      display: none;
      animation: fadeIn 0.2s ease-out;
    }

    .view.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .section-header h2 {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-header small {
      color: var(--text-muted);
      font-size: 12px;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 500;
      background: var(--primary-soft);
      color: var(--primary);
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 6px 14px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: var(--primary);
      color: white;
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.25);
      transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.1s ease;
    }

    .btn.secondary {
      background: #e5e7eb;
      color: #111827;
      box-shadow: none;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.3);
    }

    .btn.secondary:hover {
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.15);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 2px 6px rgba(15, 23, 42, 0.2);
    }

    .grid {
      display: grid;
      gap: 16px;
    }

    .grid-3 {
      grid-template-columns: repeat(3, minmax(0, 1fr));
    }

    .grid-2 {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .card {
      background: var(--bg-card);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 14px 16px;
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .card-header h3 {
      font-size: 14px;
      font-weight: 600;
    }

    .kpi-value {
      font-size: 22px;
      font-weight: 700;
      margin-top: 8px;
    }

    .kpi-label {
      font-size: 12px;
      color: var(--text-muted);
    }

    .kpi-badge {
      font-size: 11px;
      font-weight: 500;
      padding: 2px 8px;
      border-radius: 999px;
    }

    .kpi-badge.success {
      background: #e8f5e9;
      color: var(--success);
    }

    .kpi-badge.warning {
      background: #fff3e0;
      color: #ef6c00;
    }

    .kpi-badge.danger {
      background: #ffebee;
      color: var(--danger);
    }

    .progress-bar {
      margin-top: 10px;
      height: 7px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-bar-inner {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      width: 0%;
      transition: width 0.4s ease-out;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 8px;
    }

    th, td {
      border-bottom: 1px solid var(--border-soft);
      padding: 6px 4px;
      text-align: left;
    }

    th {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
    }

    tbody tr:hover {
      background: #f9fafb;
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      font-weight: 500;
    }

    .status-ok {
      background: #e8f5e9;
      color: #1b5e20;
    }

    .status-pending {
      background: #fff8e1;
      color: #f57f17;
    }

    .status-risk {
      background: #ffebee;
      color: #b71c1c;
    }

    form {
      display: grid;
      gap: 8px;
      margin-top: 10px;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
    }

    label {
      font-size: 12px;
      font-weight: 500;
      color: var(--text-muted);
    }

    input[type="text"],
    input[type="number"],
    input[type="date"],
    select,
    textarea {
      width: 100%;
      border-radius: 8px;
      border: 1px solid var(--border-soft);
      padding: 6px 8px;
      font-size: 13px;
      outline: none;
      transition: border 0.15s ease, box-shadow 0.15s ease;
      background: #f9fafb;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: #1d4ed8;
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.35);
      background: white;
    }

    textarea {
      resize: vertical;
      min-height: 60px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #e5e7eb;
      color: #374151;
      margin-right: 4px;
      margin-bottom: 4px;
    }

    .badge {
      display: inline-block;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
    }

    .muted {
      font-size: 12px;
      color: var(--text-muted);
    }

    .quiz-question {
      margin-top: 10px;
      padding: 10px;
      border-radius: 8px;
      background: #f9fafb;
      border: 1px solid var(--border-soft);
    }

    .quiz-options {
      margin-top: 8px;
      display: grid;
      gap: 4px;
    }

    .quiz-result {
      margin-top: 10px;
      font-size: 13px;
      font-weight: 500;
    }

    .pill-risk {
      background: #fff3e0;
      color: #e65100;
    }

    .pill-critical {
      background: #ffebee;
      color: #c62828;
    }

    @media (max-width: 900px) {
      .container {
        grid-template-columns: 1fr;
      }
      nav {
        display: flex;
        overflow-x: auto;
        padding: 8px;
      }
      .nav-section-title {
        display: none;
      }
      .nav-item {
        white-space: nowrap;
        margin-right: 8px;
      }
      main {
        padding: 12px;
      }
      .grid-3, .grid-2 {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="branding">
    <div class="logo">B</div>
    <div>
      <h1>PESV - BOSHMANY INGENIER√çA DE LA SABANA</h1>
      <p>Gesti√≥n digital del Plan Estrat√©gico de Seguridad Vial ¬∑ Resoluci√≥n 40595 de 2022</p>
    </div>
  </div>
  <div class="user-info">
    <div style="font-weight:500;">Equipo consultor</div>
    <div style="font-size:11px; opacity:0.85;">Barfy &amp; Zulehika Compliance View</div>
  </div>
</header>

<div class="container">
  <nav>
    <div class="nav-section-title">Panel</div>
    <div class="nav-item active" data-view="dashboard">
      <span class="icon">üìä</span> Dashboard
    </div>

    <div class="nav-section-title">Gesti√≥n PESV</div>
    <div class="nav-item" data-view="conductores">
      <span class="icon">üöõ</span> Conductores
    </div>
    <div class="nav-item" data-view="evaluaciones">
      <span class="icon">‚úÖ</span> Evaluaciones
    </div>
    <div class="nav-item" data-view="riesgos">
      <span class="icon">‚ö†Ô∏è</span> Riesgos cr√≠ticos (Paso 8)
    </div>
    <div class="nav-item" data-view="campanas">
      <span class="icon">üì¢</span> Campa√±as viales
    </div>
    <div class="nav-item" data-view="indicadores">
      <span class="icon">üìà</span> Indicadores
    </div>
    <div class="nav-item" data-view="auditorias">
      <span class="icon">üìù</span> Auditor√≠as
    </div>
    <div class="nav-item" data-view="documentos">
      <span class="icon">üìÇ</span> Documentos PESV
    </div>
    <div class="nav-item" data-view="simulacros">
      <span class="icon">üö®</span> Simulacros
    </div>
  </nav>

  <main>
    <!-- DASHBOARD -->
    <section id="dashboard" class="view active">
      <div class="section-header">
        <div>
          <h2>üìä Dashboard general PESV</h2>
          <small>Visi√≥n r√°pida del cumplimiento frente a la Resoluci√≥n 40595 de 2022</small>
        </div>
        <button class="btn secondary" id="btnRecalcularDashboard">Recalcular datos</button>
      </div>

      <div class="grid grid-3">
        <div class="card">
          <div class="card-header">
            <h3>Nivel de cumplimiento PESV</h3>
            <span class="tag">Resoluci√≥n 40595 de 2022</span>
          </div>
          <div class="kpi-value" id="kpiCumplimiento">72%</div>
          <div class="kpi-label">Cumplimiento estimado (diagn√≥stico inicial)</div>
          <div class="progress-bar">
            <div class="progress-bar-inner" id="barCumplimiento"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Conductores al d√≠a</h3>
            <span class="kpi-badge success" id="badgeConductores"></span>
          </div>
          <div class="kpi-value" id="kpiConductores">0 / 0</div>
          <div class="kpi-label">Conductores con capacitaciones y evaluaciones vigentes</div>
          <div class="progress-bar">
            <div class="progress-bar-inner" id="barConductores"></div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Campa√±as 2024‚Äì2025 ejecutadas</h3>
            <span class="kpi-badge warning" id="badgeCampanas"></span>
          </div>
          <div class="kpi-value" id="kpiCampanas">0 / 0</div>
          <div class="kpi-label">Ejecuci√≥n versus plan anual de campa√±as</div>
          <div class="progress-bar">
            <div class="progress-bar-inner" id="barCampanas"></div>
          </div>
        </div>
      </div>

      <div style="height:12px;"></div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Brecha de cumplimiento por componente</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Componente</th>
                <th>Estado</th>
                <th>Brecha</th>
              </tr>
            </thead>
            <tbody id="tablaBrechas">
              <!-- Se llena por JS -->
            </tbody>
          </table>
          <p class="muted" style="margin-top:8px;">
            Esta tabla es un resumen del diagn√≥stico frente a la Resoluci√≥n 40595 de 2022. Puede ajustarse cuando se actualicen programas, campa√±as e indicadores.
          </p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Pr√≥ximas acciones clave</h3>
          </div>
          <ul style="font-size:13px; margin-left:16px; margin-top:6px;">
            <li>Definir y aprobar objetivos y metas del PESV 2025‚Äì2026.</li>
            <li>Dise√±ar y activar programas de gesti√≥n de riesgos cr√≠ticos (Paso 8).</li>
            <li>Implementar plan anual de campa√±as de sensibilizaci√≥n vial.</li>
            <li>Levantar l√≠nea base de indicadores de siniestralidad y cumplimiento.</li>
            <li>Programar y ejecutar la primera auditor√≠a interna al PESV.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- CONDUCTORES -->
    <section id="conductores" class="view">
      <div class="section-header">
        <div>
          <h2>üöõ Gesti√≥n de conductores</h2>
          <small>Registro, estado de capacitaci√≥n y evaluaci√≥n de los 55 conductores</small>
        </div>
        <button class="btn" id="btnAgregarConductor">
          ‚ûï Nuevo conductor
        </button>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Listado de conductores</h3>
            <span class="badge" id="badgeTotalConductores"></span>
          </div>
          <table>
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Placa / Ruta</th>
                <th>Estado PESV</th>
              </tr>
            </thead>
            <tbody id="tbodyConductores">
              <!-- JS -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Registrar / actualizar conductor</h3>
          </div>
          <form id="formConductor">
            <div class="form-row">
              <div>
                <label for="nombreConductor">Nombre completo</label>
                <input type="text" id="nombreConductor" placeholder="Ej. Juan P√©rez">
              </div>
              <div>
                <label for="rutaConductor">Placa / Ruta</label>
                <input type="text" id="rutaConductor" placeholder="Ej. TTT-123 ¬∑ Ruta Costa Atl√°ntica">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label for="estadoConductor">Estado</label>
                <select id="estadoConductor">
                  <option value="AL_DIA">Al d√≠a</option>
                  <option value="PENDIENTE_CAPACITACION">Pendiente capacitaci√≥n</option>
                  <option value="PENDIENTE_EVALUACION">Pendiente evaluaci√≥n</option>
                  <option value="CRITICO">Cr√≠tico</option>
                </select>
              </div>
              <div>
                <label for="riesgoConductor">Principal riesgo asociado</label>
                <select id="riesgoConductor">
                  <option value="Velocidad">Exceso de velocidad</option>
                  <option value="Distracciones">Distracciones (celular)</option>
                  <option value="Fatiga">Fatiga / sue√±o</option>
                  <option value="Alcohol">Alcohol / drogas</option>
                  <option value="Via">Condiciones de la v√≠a</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn">Guardar / actualizar</button>
            <div id="msgConductor" class="muted"></div>
          </form>
        </div>
      </div>
    </section>

    <!-- EVALUACIONES -->
    <section id="evaluaciones" class="view">
      <div class="section-header">
        <div>
          <h2>‚úÖ Evaluaciones de conocimiento</h2>
          <small>Cuestionarios interactivos sobre normatividad, PESV y conducci√≥n segura</small>
        </div>
        <button class="btn secondary" id="btnReiniciarQuiz">Reiniciar evaluaci√≥n</button>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Seleccionar m√≥dulo de evaluaci√≥n</h3>
          </div>
          <form id="formSeleccionQuiz">
            <label for="selectQuiz">M√≥dulo</label>
            <select id="selectQuiz">
              <option value="normatividad">Normatividad y Resoluci√≥n 40595 de 2022</option>
              <option value="conduccionDefensiva">Conducci√≥n defensiva</option>
              <option value="riesgosCriticos">Riesgos cr√≠ticos</option>
            </select>
            <button type="submit" class="btn" style="margin-top:8px;">Cargar preguntas</button>
          </form>

          <div id="quizContainer">
            <!-- Preguntas generadas por JS -->
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Resultados y evidencia</h3>
          </div>
          <p class="muted">
            Este panel muestra el resultado de la √∫ltima evaluaci√≥n aplicada al conductor. En una implementaci√≥n real,
            aqu√≠ se guardar√≠an los resultados en base de datos y se generar√≠an certificados digitales.
          </p>
          <div id="quizResultado" class="quiz-result"></div>
          <div style="margin-top:10px;">
            <span class="badge">Evidencia digital</span>
            <p class="muted" style="margin-top:4px;">
              ‚úì Se registra fecha, m√≥dulo evaluado, n√∫mero de preguntas, porcentaje de acierto y conductor evaluado.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- RIESGOS CR√çTICOS -->
    <section id="riesgos" class="view">
      <div class="section-header">
        <div>
          <h2>‚ö†Ô∏è Programas de gesti√≥n de riesgos cr√≠ticos (Paso 8)</h2>
          <small>Identificaci√≥n, contenidos y evaluaci√≥n de riesgos cr√≠ticos de la operaci√≥n</small>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Riesgos cr√≠ticos definidos</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Riesgo cr√≠tico</th>
                <th>Estado programa</th>
                <th>Acciones clave</th>
              </tr>
            </thead>
            <tbody id="tbodyRiesgos">
              <!-- JS -->
            </tbody>
          </table>
          <p class="muted" style="margin-top:8px;">
            Estos programas deben quedar documentados y enlazados a contenidos digitales, evaluaciones y campa√±as de sensibilizaci√≥n.
          </p>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Detalle del riesgo seleccionado</h3>
          </div>
          <div id="detalleRiesgo">
            <p class="muted">Selecciona un riesgo cr√≠tico en la tabla para ver el detalle del programa propuesto.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CAMPA√ëAS -->
    <section id="campanas" class="view">
      <div class="section-header">
        <div>
          <h2>üì¢ Campa√±as de sensibilizaci√≥n vial</h2>
          <small>Planificaci√≥n, ejecuci√≥n y evidencia de campa√±as 2024‚Äì2025</small>
        </div>
        <button class="btn" id="btnAgregarCampana">‚ûï Nueva campa√±a</button>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Plan de campa√±as</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Tema</th>
                <th>Fecha</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody id="tbodyCampanas">
              <!-- JS -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Registrar / actualizar campa√±a</h3>
          </div>
          <form id="formCampana">
            <div class="form-row">
              <div>
                <label for="temaCampana">Tema de la campa√±a</label>
                <input type="text" id="temaCampana" placeholder="Ej. Distracciones al volante">
              </div>
              <div>
                <label for="fechaCampana">Fecha planificada</label>
                <input type="date" id="fechaCampana">
              </div>
            </div>
            <div class="form-row">
              <div>
                <label for="estadoCampana">Estado</label>
                <select id="estadoCampana">
                  <option value="PLANIFICADA">Planificada</option>
                  <option value="EJECUTADA">Ejecutada</option>
                  <option value="REPROGRAMADA">Reprogramada</option>
                </select>
              </div>
              <div>
                <label for="canalCampana">Canal principal</label>
                <select id="canalCampana">
                  <option value="WhatsApp">WhatsApp / Mensajer√≠a</option>
                  <option value="Correo">Correo electr√≥nico</option>
                  <option value="Presencial">Charla presencial</option>
                </select>
              </div>
            </div>
            <label for="detalleCampana">Descripci√≥n / evidencia</label>
            <textarea id="detalleCampana" placeholder="Ej. Env√≠o de infograf√≠a, video corto, registro de asistentes..."></textarea>
            <button type="submit" class="btn">Guardar campa√±a</button>
            <div id="msgCampana" class="muted"></div>
          </form>
        </div>
      </div>
    </section>

    <!-- INDICADORES -->
    <section id="indicadores" class="view">
      <div class="section-header">
        <div>
          <h2>üìà Indicadores de seguridad vial</h2>
          <small>Seguimiento cuantitativo al desempe√±o del PESV</small>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Indicadores configurados</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Indicador</th>
                <th>Valor actual</th>
                <th>Meta</th>
              </tr>
            </thead>
            <tbody id="tbodyIndicadores">
              <!-- JS -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Notas y an√°lisis</h3>
          </div>
          <p class="muted">
            En una implementaci√≥n real, este m√≥dulo se alimentar√≠a de los registros de incidentes, accidentes, infracciones,
            capacitaciones y campa√±as. Aqu√≠ se pueden generar gr√°ficas y reportes autom√°ticos para la gerencia.
          </p>
          <ul style="font-size:13px; margin-left:16px; margin-top:8px;">
            <li>Accidentalidad por mill√≥n de km recorridos.</li>
            <li>Porcentaje de conductores capacitados vs. total.</li>
            <li>Relaci√≥n entre infracciones y campa√±as de sensibilizaci√≥n.</li>
            <li>Cumplimiento de auditor√≠as internas del PESV.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- AUDITOR√çAS -->
    <section id="auditorias" class="view">
      <div class="section-header">
        <div>
          <h2>üìù Auditor√≠as internas del PESV</h2>
          <small>Programaci√≥n, hallazgos y acciones de mejora</small>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Auditor√≠as programadas / ejecutadas</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Estado</th>
                <th>Hallazgos clave</th>
              </tr>
            </thead>
            <tbody id="tbodyAuditorias">
              <!-- JS -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Resumen del programa de auditor√≠a</h3>
          </div>
          <p class="muted">
            La Resoluci√≥n 40595 de 2022 exige seguimiento, verificaci√≥n y mejora continua del PESV.
            El programa de auditor√≠as internas permite evidenciar el cumplimiento, identificar brechas
            y generar acciones correctivas.
          </p>
          <ul style="font-size:13px; margin-left:16px; margin-top:8px;">
            <li>Alcance: todos los componentes del PESV (pol√≠tica, objetivos, programas, indicadores, etc.).</li>
            <li>Periodicidad: m√≠nimo anual o cuando se presenten cambios relevantes en la operaci√≥n.</li>
            <li>Resultados: informes de auditor√≠a, planes de acci√≥n y seguimiento a hallazgos.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- DOCUMENTOS -->
    <section id="documentos" class="view">
      <div class="section-header">
        <div>
          <h2>üìÇ Gesti√≥n documental del PESV</h2>
          <small>Repositorio central de documentos, pol√≠ticas y evidencias</small>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>Documentos principales</h3>
        </div>
        <table>
          <thead>
            <tr>
              <th>Documento</th>
              <th>Tipo</th>
              <th>Versi√≥n</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody id="tbodyDocumentos">
            <!-- JS -->
          </tbody>
        </table>
        <p class="muted" style="margin-top:8px;">
          En una versi√≥n productiva, aqu√≠ se podr√≠an cargar archivos (PDF, Word, im√°genes) y controlar versiones,
          aprobaciones y responsables.
        </p>
      </div>
    </section>

    <!-- SIMULACROS -->
    <section id="simulacros" class="view">
      <div class="section-header">
        <div>
          <h2>üö® Simulacros de seguridad vial</h2>
          <small>Registro del simulacro en Rancher√≠a (junio 2025) y futuros ejercicios</small>
        </div>
      </div>

      <div class="grid grid-2">
        <div class="card">
          <div class="card-header">
            <h3>Historial de simulacros</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Lugar</th>
                <th>Enfoque</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody id="tbodySimulacros">
              <!-- JS -->
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-header">
            <h3>Detalle del simulacro destacado</h3>
          </div>
          <p><strong>Simulacro vial - Entrada de Rancher√≠a ¬∑ Junio 2025</strong></p>
          <p class="muted" style="margin-top:6px;">
            Ejercicio orientado a evaluar la respuesta de conductores y personal operativo ante
            un incidente vial en zona de alta circulaci√≥n de veh√≠culos pesados. Incluy√≥:
          </p>
          <ul style="font-size:13px; margin-left:16px; margin-top:6px;">
            <li>Activaci√≥n de protocolos de emergencia.</li>
            <li>Coordinaci√≥n con autoridades de tr√°nsito.</li>
            <li>Evaluaci√≥n de tiempos de respuesta y comunicaci√≥n.</li>
            <li>Lecciones aprendidas y acciones de mejora incorporadas al PESV.</li>
          </ul>
        </div>
      </div>
    </section>
  </main>
</div>

<script>
  // -----------------------------
  // DATOS DE EJEMPLO (mock data)
  // -----------------------------
  const brechas = [
    { componente: 'Pol√≠tica de seguridad vial', estado: 'Parcial', brecha: 'Requiere actualizaci√≥n y alineaci√≥n con Resoluci√≥n 40595.' },
    { componente: 'Objetivos y metas del PESV', estado: 'No cumple', brecha: 'No se han definido objetivos cuantificables ni metas anuales.' },
    { componente: 'Programas de riesgos cr√≠ticos (Paso 8)', estado: 'No cumple', brecha: 'No se han dise√±ado ni documentado los programas.' },
    { componente: 'Indicadores del PESV', estado: 'No cumple', brecha: 'No se realiza medici√≥n sistem√°tica de indicadores.' },
    { componente: 'Auditor√≠a interna al PESV', estado: 'No cumple', brecha: 'No se ha planificado ni ejecutado auditor√≠a formal.' },
    { componente: 'Campa√±as viales 2024‚Äì2025', estado: 'No cumple', brecha: 'No se han ejecutado campa√±as en estos a√±os.' },
    { componente: 'Simulacro vial junio 2025', estado: 'Cumple', brecha: 'Requiere registro y an√°lisis de resultados.' }
  ];

  let conductores = [
    { nombre: 'Juan P√©rez', ruta: 'TTT-123 ¬∑ Ruta Costa Atl√°ntica', estado: 'AL_DIA', riesgo: 'Velocidad' },
    { nombre: 'Mar√≠a Garc√≠a', ruta: 'XYZ-789 ¬∑ Ruta Santander', estado: 'PENDIENTE_CAPACITACION', riesgo: 'Fatiga' },
    { nombre: 'Carlos L√≥pez', ruta: 'AAA-456 ¬∑ Ruta Magdalena', estado: 'PENDIENTE_EVALUACION', riesgo: 'Distracciones' },
    { nombre: 'Ana Rodr√≠guez', ruta: 'BBB-999 ¬∑ Ruta Nari√±o', estado: 'CRITICO', riesgo: 'Alcohol' }
  ];

  let campanas = [
    { tema: 'Distracciones al volante', fecha: '2025-03-15', estado: 'EJECUTADA', canal: 'WhatsApp', detalle: 'Env√≠o de infograf√≠a y video corto.' },
    { tema: 'Exceso de velocidad', fecha: '2025-06-10', estado: 'PLANIFICADA', canal: 'Presencial', detalle: 'Charla en base principal.' }
  ];

  const riesgosCriticos = [
    {
      nombre: 'Exceso de velocidad',
      estado: 'En dise√±o',
      acciones: 'Definir l√≠mites por ruta, control con GPS, sanciones internas.',
      detalle: 'Programa enfocado en la sensibilizaci√≥n sobre consecuencias del exceso de velocidad, monitoreo con telemetr√≠a y retroalimentaci√≥n peri√≥dica a los conductores.'
    },
    {
      nombre: 'Distracciones (celular, radio, etc.)',
      estado: 'Pendiente',
      acciones: 'Pol√≠tica de cero uso de celular en marcha, campa√±as internas.',
      detalle: 'Incluye c√°psulas educativas, compromisos firmados y verificaci√≥n mediante acompa√±amiento en ruta.'
    },
    {
      nombre: 'Fatiga / sue√±o',
      estado: 'Pendiente',
      acciones: 'Control de horarios, pausas activas, reporte de s√≠ntomas.',
      detalle: 'Busca garantizar tiempos m√≠nimos de descanso y detectar conductores en condici√≥n de riesgo por fatiga.'
    },
    {
      nombre: 'Alcohol / drogas',
      estado: 'En ejecuci√≥n',
      acciones: 'Pruebas aleatorias, pol√≠tica de tolerancia cero.',
      detalle: 'Conecta con la pol√≠tica de convivencia y r√©gimen disciplinario de la empresa.'
    },
    {
      nombre: 'Condiciones de la v√≠a / clima',
      estado: 'Pendiente',
      acciones: 'Alertas de riesgo por ruta, informaci√≥n meteorol√≥gica.',
      detalle: 'Programa de informaci√≥n previa a la ruta y actualizaci√≥n en tiempo real cuando sea posible.'
    }
  ];

  const indicadores = [
    { nombre: 'Accidentes por mill√≥n de km recorridos', actual: '2.3', meta: '‚â§ 1.5' },
    { nombre: 'Porcentaje de conductores capacitados en el a√±o', actual: '64%', meta: '‚â• 90%' },
    { nombre: 'N√∫mero de campa√±as viales ejecutadas en 2025', actual: '1', meta: '‚â• 4' },
    { nombre: 'Auditor√≠as internas al PESV realizadas', actual: '0', meta: '‚â• 1' }
  ];

  const auditorias = [
    { fecha: '2025-10-30', estado: 'PLANIFICADA', hallazgos: 'Por ejecutar, se espera revisar totalidad del PESV.' },
    { fecha: '2024-11-15', estado: 'NO EJECUTADA', hallazgos: 'No se realiz√≥ la auditor√≠a programada.' }
  ];

  const documentos = [
    { nombre: 'Pol√≠tica de Seguridad Vial', tipo: 'Pol√≠tica', version: '1.0', estado: 'Vigente (requiere actualizaci√≥n)' },
    { nombre: 'Plan Estrat√©gico de Seguridad Vial (PESV)', tipo: 'Plan', version: 'Borrador', estado: 'En revisi√≥n' },
    { nombre: 'Formato de investigaci√≥n de accidentes', tipo: 'Procedimiento', version: '1.2', estado: 'Vigente' },
    { nombre: 'Informe simulacro Rancher√≠a junio 2025', tipo: 'Informe', version: '1.0', estado: 'Emitido' }
  ];

  const simulacros = [
    { fecha: '2025-06-20', lugar: 'Entrada de Rancher√≠a', enfoque: 'Incidente vial con veh√≠culo pesado', estado: 'Ejecutado' },
    { fecha: '2026-03-10', lugar: 'Base principal', enfoque: 'Evacuaci√≥n por choque m√∫ltiple', estado: 'Planificado' }
  ];

  const quizzes = {
    normatividad: [
      {
        pregunta: 'La Resoluci√≥n 40595 de 2022 est√° orientada principalmente a:',
        opciones: [
          'Regular el mantenimiento de los veh√≠culos de carga.',
          'Establecer lineamientos para los Planes Estrat√©gicos de Seguridad Vial.',
          'Definir las sanciones econ√≥micas para empresas transportadoras.',
          'Regular la importaci√≥n de veh√≠culos de alto tonelaje.'
        ],
        correcta: 1
      },
      {
        pregunta: 'Un PESV debe incluir, entre otros elementos:',
        opciones: [
          'Pol√≠tica, objetivos, programas de gesti√≥n de riesgos, indicadores y auditor√≠as.',
          '√önicamente capacitaciones a conductores.',
          'Solo el plan de mantenimiento preventivo.',
          'Un listado de veh√≠culos matriculados.'
        ],
        correcta: 0
      }
    ],
    conduccionDefensiva: [
      {
        pregunta: 'La conducci√≥n defensiva se basa principalmente en:',
        opciones: [
          'Confiar en la pericia de los dem√°s conductores.',
          'Anticiparse a los riesgos y mantener m√°rgenes de seguridad.',
          'Conducir a m√°xima velocidad dentro de la v√≠a.',
          'Aumentar la productividad reduciendo tiempos de viaje.'
        ],
        correcta: 1
      },
      {
        pregunta: '¬øCu√°l de las siguientes pr√°cticas es coherente con la conducci√≥n defensiva?',
        opciones: [
          'Usar el celular siempre que el tr√°fico est√© lento.',
          'Reducir la distancia de seguimiento para adelantar m√°s r√°pido.',
          'Realizar maniobras bruscas para ganar tiempo.',
          'Adaptar la velocidad a las condiciones de la v√≠a y clima.'
        ],
        correcta: 3
      }
    ],
    riesgosCriticos: [
      {
        pregunta: 'Un riesgo cr√≠tico de la operaci√≥n de transporte de carga es:',
        opciones: [
          'Llevar botiqu√≠n en el veh√≠culo.',
          'Exceso de velocidad en pendientes y curvas.',
          'Usar cintur√≥n de seguridad.',
          'Revisar la presi√≥n de las llantas.'
        ],
        correcta: 1
      },
      {
        pregunta: 'La gesti√≥n de riesgos cr√≠ticos en el PESV implica:',
        opciones: [
          'Identificarlos, priorizarlos y dise√±ar programas espec√≠ficos con acciones de control.',
          'Solo registrarlos en una lista.',
          'Delegarlos completamente a los conductores.',
          'Esperar a que ocurra un accidente para actuar.'
        ],
        correcta: 0
      }
    ]
  };

  // -----------------------------
  // UTILIDADES
  // -----------------------------
  function formatearFechaISO(iso) {
    if (!iso) return '-';
    const d = new Date(iso);
    if (isNaN(d)) return iso;
    return d.toLocaleDateString('es-CO', { year: 'numeric', month: 'short', day: '2-digit' });
  }

  function crearEstadoPill(estado) {
    const span = document.createElement('span');
    span.classList.add('status-pill');

    switch (estado) {
      case 'Cumple':
        span.classList.add('status-ok');
        span.textContent = 'Cumple';
        break;
      case 'Parcial':
        span.classList.add('status-pending');
        span.textContent = 'Parcial';
        break;
      default:
        span.classList.add('status-risk');
        span.textContent = 'No cumple';
        break;
    }
    return span;
  }

  function estadoConductorPill(estado) {
    const span = document.createElement('span');
    span.classList.add('status-pill');
    if (estado === 'AL_DIA') {
      span.classList.add('status-ok');
      span.textContent = 'Al d√≠a';
    } else if (estado === 'PENDIENTE_CAPACITACION' || estado === 'PENDIENTE_EVALUACION') {
      span.classList.add('status-pending');
      span.textContent = 'Pendiente';
    } else {
      span.classList.add('status-risk');
      span.textContent = 'Cr√≠tico';
    }
    return span;
  }

  // -----------------------------
  // RENDERIZADO DE CADA M√ìDULO
  // -----------------------------
  function renderDashboard() {
    // KPI cumplimiento (estimado simple seg√∫n brechas)
    const totalBrechas = brechas.length;
    const cumple = brechas.filter(b => b.estado === 'Cumple').length;
    const parcial = brechas.filter(b => b.estado === 'Parcial').length;
    const porcentaje = Math.round(((cumple + parcial * 0.5) / totalBrechas) * 100);

    document.getElementById('kpiCumplimiento').textContent = porcentaje + '%';
    document.getElementById('barCumplimiento').style.width = porcentaje + '%';

    // KPI conductores
    const totalConductores = conductores.length;
    const alDia = conductores.filter(c => c.estado === 'AL_DIA').length;

    document.getElementById('kpiConductores').textContent = `${alDia} / ${totalConductores}`;
    const porcConductores = totalConductores ? Math.round((alDia / totalConductores) * 100) : 0;
    document.getElementById('barConductores').style.width = porcConductores + '%';
    document.getElementById('badgeConductores').textContent = porcConductores + '% al d√≠a';

    // KPI campa√±as
    const totalCampanas = campanas.length;
    const ejecutadas = campanas.filter(c => c.estado === 'EJECUTADA').length;
    document.getElementById('kpiCampanas').textContent = `${ejecutadas} / ${totalCampanas}`;
    const porcCampanas = totalCampanas ? Math.round((ejecutadas / totalCampanas) * 100) : 0;
    document.getElementById('barCampanas').style.width = porcCampanas + '%';
    document.getElementById('badgeCampanas').textContent = porcCampanas + '% ejecutadas';

    // Tabla de brechas
    const tbody = document.getElementById('tablaBrechas');
    tbody.innerHTML = '';
    brechas.forEach(b => {
      const tr = document.createElement('tr');
      const tdComp = document.createElement('td');
      const tdEstado = document.createElement('td');
      const tdBrecha = document.createElement('td');

      tdComp.textContent = b.componente;
      tdBrecha.textContent = b.brecha;
      tdEstado.appendChild(crearEstadoPill(b.estado));

      tr.appendChild(tdComp);
      tr.appendChild(tdEstado);
      tr.appendChild(tdBrecha);
      tbody.appendChild(tr);
    });
  }

  function renderConductores() {
    const tbody = document.getElementById('tbodyConductores');
    tbody.innerHTML = '';
    conductores.forEach(c => {
      const tr = document.createElement('tr');
      const tdNombre = document.createElement('td');
      const tdRuta = document.createElement('td');
      const tdEstado = document.createElement('td');

      tdNombre.textContent = c.nombre;
      tdRuta.textContent = c.ruta;
      tdEstado.appendChild(estadoConductorPill(c.estado));

      tr.appendChild(tdNombre);
      tr.appendChild(tdRuta);
      tr.appendChild(tdEstado);
      tbody.appendChild(tr);
    });

    document.getElementById('badgeTotalConductores').textContent =
      `${conductores.length} conductores registrados`;
  }

  function renderRiesgos() {
    const tbody = document.getElementById('tbodyRiesgos');
    tbody.innerHTML = '';
    riesgosCriticos.forEach((r, idx) => {
      const tr = document.createElement('tr');
      tr.dataset.index = idx;
      tr.style.cursor = 'pointer';

      const tdNombre = document.createElement('td');
      const tdEstado = document.createElement('td');
      const tdAcciones = document.createElement('td');

      tdNombre.textContent = r.nombre;
      const estadoSpan = document.createElement('span');
      estadoSpan.classList.add('pill');
      if (r.estado === 'En ejecuci√≥n') {
        estadoSpan.classList.add('pill-risk');
      } else if (r.estado === 'Pendiente') {
        estadoSpan.classList.add('pill-critical');
      }
      estadoSpan.textContent = r.estado;
      tdEstado.appendChild(estadoSpan);

      tdAcciones.textContent = r.acciones;

      tr.appendChild(tdNombre);
      tr.appendChild(tdEstado);
      tr.appendChild(tdAcciones);
      tbody.appendChild(tr);
    });
  }

  function renderCampanas() {
    const tbody = document.getElementById('tbodyCampanas');
    tbody.innerHTML = '';
    campanas.forEach(c => {
      const tr = document.createElement('tr');
      const tdTema = document.createElement('td');
      const tdFecha = document.createElement('td');
      const tdEstado = document.createElement('td');

      tdTema.textContent = c.tema;
      tdFecha.textContent = formatearFechaISO(c.fecha);

      const pill = document.createElement('span');
      pill.classList.add('status-pill');
      if (c.estado === 'EJECUTADA') {
        pill.classList.add('status-ok');
        pill.textContent = 'Ejecutada';
      } else if (c.estado === 'PLANIFICADA') {
        pill.classList.add('status-pending');
        pill.textContent = 'Planificada';
      } else {
        pill.classList.add('status-risk');
        pill.textContent = 'Reprogramada';
      }
      tdEstado.appendChild(pill);

      tr.appendChild(tdTema);
      tr.appendChild(tdFecha);
      tr.appendChild(tdEstado);
      tbody.appendChild(tr);
    });
  }

  function renderIndicadores() {
    const tbody = document.getElementById('tbodyIndicadores');
    tbody.innerHTML = '';
    indicadores.forEach(i => {
      const tr = document.createElement('tr');
      const tdNombre = document.createElement('td');
      const tdActual = document.createElement('td');
      const tdMeta = document.createElement('td');

      tdNombre.textContent = i.nombre;
      tdActual.textContent = i.actual;
      tdMeta.textContent = i.meta;

      tr.appendChild(tdNombre);
      tr.appendChild(tdActual);
      tr.appendChild(tdMeta);
      tbody.appendChild(tr);
    });
  }

  function renderAuditorias() {
    const tbody = document.getElementById('tbodyAuditorias');
    tbody.innerHTML = '';
    auditorias.forEach(a => {
      const tr = document.createElement('tr');
      const tdFecha = document.createElement('td');
      const tdEstado = document.createElement('td');
      const tdHallazgos = document.createElement('td');

      tdFecha.textContent = formatearFechaISO(a.fecha);
      const pill = document.createElement('span');
      pill.classList.add('status-pill');
      if (a.estado === 'PLANIFICADA') {
        pill.classList.add('status-pending');
      } else if (a.estado === 'EJECUTADA') {
        pill.classList.add('status-ok');
      } else {
        pill.classList.add('status-risk');
      }
      pill.textContent = a.estado;
      tdEstado.appendChild(pill);

      tdHallazgos.textContent = a.hallazgos;

      tr.appendChild(tdFecha);
      tr.appendChild(tdEstado);
      tr.appendChild(tdHallazgos);
      tbody.appendChild(tr);
    });
  }

  function renderDocumentos() {
    const tbody = document.getElementById('tbodyDocumentos');
    tbody.innerHTML = '';
    documentos.forEach(d => {
      const tr = document.createElement('tr');
      const tdNombre = document.createElement('td');
      const tdTipo = document.createElement('td');
      const tdVersion = document.createElement('td');
      const tdEstado = document.createElement('td');

      tdNombre.textContent = d.nombre;
      tdTipo.textContent = d.tipo;
      tdVersion.textContent = d.version;
      tdEstado.textContent = d.estado;

      tr.appendChild(tdNombre);
      tr.appendChild(tdTipo);
      tr.appendChild(tdVersion);
      tr.appendChild(tdEstado);
      tbody.appendChild(tr);
    });
  }

  function renderSimulacros() {
    const tbody = document.getElementById('tbodySimulacros');
    tbody.innerHTML = '';
    simulacros.forEach(s => {
      const tr = document.createElement('tr');
      const tdFecha = document.createElement('td');
      const tdLugar = document.createElement('td');
      const tdEnfoque = document.createElement('td');
      const tdEstado = document.createElement('td');

      tdFecha.textContent = formatearFechaISO(s.fecha);
      tdLugar.textContent = s.lugar;
      tdEnfoque.textContent = s.enfoque;
      const pill = document.createElement('span');
      pill.classList.add('status-pill');
      if (s.estado === 'Ejecutado') {
        pill.classList.add('status-ok');
      } else {
        pill.classList.add('status-pending');
      }
      pill.textContent = s.estado;
      tdEstado.appendChild(pill);

      tr.appendChild(tdFecha);
      tr.appendChild(tdLugar);
      tr.appendChild(tdEnfoque);
      tr.appendChild(tdEstado);
      tbody.appendChild(tr);
    });
  }

  // -----------------------------
  // QUIZ / EVALUACIONES
  // -----------------------------
  let quizActual = null;

  function renderQuiz(modulo) {
    quizActual = quizzes[modulo];
    const container = document.getElementById('quizContainer');
    container.innerHTML = '';

    if (!quizActual || quizActual.length === 0) {
      container.innerHTML = '<p class="muted">No hay preguntas configuradas para este m√≥dulo.</p>';
      return;
    }

    quizActual.forEach((q, idx) => {
      const div = document.createElement('div');
      div.classList.add('quiz-question');
      div.dataset.index = idx;

      const p = document.createElement('p');
      p.textContent = (idx + 1) + '. ' + q.pregunta;
      div.appendChild(p);

      const optionsDiv = document.createElement('div');
      optionsDiv.classList.add('quiz-options');

      q.opciones.forEach((op, opIdx) => {
        const label = document.createElement('label');
        label.style.display = 'flex';
        label.style.alignItems = 'center';
        label.style.gap = '4px';

        const radio = document.createElement('input');
        radio.type = 'radio';
        radio.name = 'q' + idx;
        radio.value = opIdx;

        label.appendChild(radio);
        label.appendChild(document.createTextNode(op));
        optionsDiv.appendChild(label);
      });

      div.appendChild(optionsDiv);
      container.appendChild(div);
    });

    // Bot√≥n de enviar
    const btn = document.createElement('button');
    btn.textContent = 'Calificar evaluaci√≥n';
    btn.classList.add('btn');
    btn.style.marginTop = '10px';
    btn.addEventListener('click', calificarQuiz);
    container.appendChild(btn);
  }

  function calificarQuiz() {
    if (!quizActual) return;

    let correctas = 0;
    let respondidas = 0;

    quizActual.forEach((q, idx) => {
      const seleccion = document.querySelector('input[name="q' + idx + '"]:checked');
      if (seleccion) {
        respondidas++;
        if (parseInt(seleccion.value, 10) === q.correcta) {
          correctas++;
        }
      }
    });

    const total = quizActual.length;
    const porcentaje = total ? Math.round((correctas / total) * 100) : 0;

    const resultadoDiv = document.getElementById('quizResultado');
    resultadoDiv.innerHTML = `
      M√≥dulo evaluado: <strong>${document.getElementById('selectQuiz').selectedOptions[0].text}</strong><br>
      Preguntas respondidas: <strong>${respondidas} / ${total}</strong><br>
      Respuestas correctas: <strong>${correctas}</strong><br>
      Resultado: <strong>${porcentaje}%</strong>
    `;

    if (porcentaje >= 80) {
      resultadoDiv.innerHTML += `<br><span class="kpi-badge success">Aprobado</span>`;
    } else {
      resultadoDiv.innerHTML += `<br><span class="kpi-badge danger">Requiere refuerzo</span>`;
    }
  }

  // -----------------------------
  // EVENTOS Y NAVEGACI√ìN
  // -----------------------------
  document.addEventListener('DOMContentLoaded', () => {
    // Navegaci√≥n simple
    const navItems = document.querySelectorAll('.nav-item');
    const views = document.querySelectorAll('.view');

    navItems.forEach(item => {
      item.addEventListener('click', () => {
        const viewId = item.dataset.view;
        navItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');

        views.forEach(v => {
          v.classList.toggle('active', v.id === viewId);
        });
      });
    });

    // Bot√≥n recalcular Dashboard
    document.getElementById('btnRecalcularDashboard').addEventListener('click', renderDashboard);

    // Conductores: bot√≥n "Nuevo conductor" solo limpia el formulario
    document.getElementById('btnAgregarConductor').addEventListener('click', () => {
      document.getElementById('formConductor').reset();
      document.getElementById('msgConductor').textContent = 'Formulario listo para nuevo registro.';
    });

    // Guardar conductor
    document.getElementById('formConductor').addEventListener('submit', (e) => {
      e.preventDefault();
      const nombre = document.getElementById('nombreConductor').value.trim();
      const ruta = document.getElementById('rutaConductor').value.trim();
      const estado = document.getElementById('estadoConductor').value;
      const riesgo = document.getElementById('riesgoConductor').value;

      if (!nombre || !ruta) {
        document.getElementById('msgConductor').textContent = 'Por favor, completa nombre y ruta/placa.';
        return;
      }

      conductores.push({ nombre, ruta, estado, riesgo });
      renderConductores();
      renderDashboard();
      document.getElementById('msgConductor').textContent = 'Conductor registrado/actualizado en memoria local.';
      document.getElementById('formConductor').reset();
    });

    // Riesgos: clic en filas
    document.getElementById('tbodyRiesgos').addEventListener('click', (e) => {
      const tr = e.target.closest('tr');
      if (!tr) return;
      const idx = tr.dataset.index;
      const riesgo = riesgosCriticos[idx];
      if (!riesgo) return;

      const detalleDiv = document.getElementById('detalleRiesgo');
      detalleDiv.innerHTML = `
        <h4 style="font-size:15px; margin-bottom:4px;">${riesgo.nombre}</h4>
        <p class="muted"><strong>Estado del programa:</strong> ${riesgo.estado}</p>
        <p style="font-size:13px; margin-top:6px;">${riesgo.detalle}</p>
      `;
    });

    // Campa√±as: bot√≥n para limpiar
    document.getElementById('btnAgregarCampana').addEventListener('click', () => {
      document.getElementById('formCampana').reset();
      document.getElementById('msgCampana').textContent = 'Formulario listo para nueva campa√±a.';
    });

    // Guardar campa√±a
    document.getElementById('formCampana').addEventListener('submit', (e) => {
      e.preventDefault();
      const tema = document.getElementById('temaCampana').value.trim();
      const fecha = document.getElementById('fechaCampana').value;
      const estado = document.getElementById('estadoCampana').value;
      const canal = document.getElementById('canalCampana').value;
      const detalle = document.getElementById('detalleCampana').value.trim();

      if (!tema || !fecha) {
        document.getElementById('msgCampana').textContent = 'Tema y fecha son obligatorios.';
        return;
      }

      campanas.push({ tema, fecha, estado, canal, detalle });
      renderCampanas();
      renderDashboard();
      document.getElementById('msgCampana').textContent = 'Campa√±a registrada en memoria local.';
      document.getElementById('formCampana').reset();
    });

    // Quiz: selecci√≥n de m√≥dulo
    document.getElementById('formSeleccionQuiz').addEventListener('submit', (e) => {
      e.preventDefault();
      const modulo = document.getElementById('selectQuiz').value;
      renderQuiz(modulo);
      document.getElementById('quizResultado').innerHTML = '';
    });

    document.getElementById('btnReiniciarQuiz').addEventListener('click', () => {
      document.getElementById('quizContainer').innerHTML = '';
      document.getElementById('quizResultado').innerHTML = '';
    });

    // Render inicial de todos los m√≥dulos
    renderDashboard();
    renderConductores();
    renderRiesgos();
    renderCampanas();
    renderIndicadores();
    renderAuditorias();
    renderDocumentos();
    renderSimulacros();
  });
</script>

</body>
</html>
